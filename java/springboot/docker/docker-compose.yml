# Copyright (c) 2021 Gu Xiaoyu
# Frameworks-Benchmark is licensed under Mulan PSL v2.
# You can use this software according to the terms and conditions of the Mulan PSL v2.
# You may obtain a copy of Mulan PSL v2 at:
#          http://license.coscl.org.cn/MulanPSL2
# THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
# See the Mulan PSL v2 for more details.

version: '3.9'
services:
  app:
    image: java-local:springboot
    deploy:
      resources:
        limits:
          cpus: 2
          memory: 4G
    environment:
      - JAVA_OPTS=-XX:CICompilerCount=2 -XX:CompressedClassSpaceSize=120m -XX:G1ConcRefinementThreads=4 -XX:InitialHeapSize=256m -XX:MaxDirectMemorySize=128m -XX:MaxHeapSize=3840m -XX:MaxMetaspaceSize=180m -XX:StringDeduplicationAgeThreshold=7 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC -XX:+UseStringDeduplication -XX:MaxGCPauseMillis=80 -Xlog:gc*,gc+phases=debug:file=/opt/app/logs/gc.log:tags,time,uptime,level:filecount=5,filesize=20M
    ports:
      - 8886:8080